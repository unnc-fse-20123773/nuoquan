(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/search/search"],{"0d8c":function(e,t,r){"use strict";r.r(t);var s=r("2bfd"),a=r("2145");for(var i in a)"default"!==i&&function(e){r.d(t,e,function(){return a[e]})}(i);r("ca3e");var n=r("2877"),o=Object(n["a"])(a["default"],s["a"],s["b"],!1,null,"a6bfaa5e",null);t["default"]=o.exports},2145:function(e,t,r){"use strict";r.r(t);var s=r("24fb"),a=r.n(s);for(var i in s)"default"!==i&&function(e){r.d(t,e,function(){return s[e]})}(i);t["default"]=a.a},"24fb":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){return r.e("components/searchResultArticle").then(r.bind(null,"8d21"))},a=!1,i={data:function(){return{hotList:[],searchKeyWords:"",searchedArticleList:[],searching:!0,searchHisKeyList:e.getStorageSync("search_history"),userInfo:this.getGlobalUserInfo(),totalPage:1,currentPage:1}},components:{searchResultArticle:s},created:function(){this.getHotWords()},destroyed:function(){e.hideLoading()},methods:{getHotWords:function(){var t=this;e.request({url:t.$serverUrl+"/article/hot",method:"POST",success:function(e){console.log(e),t.hotList=e.data.data,console.log(t.hotList)}})},search:function(t){if(!a){a=!0;var r=this,s=1;""!=this.searchKeyWords&&null!=this.searchKeyWords?(e.getStorage({key:"search_history",success:function(t){var s=t.data;if(s.length>10){var a=!0,i=!1,n=void 0;try{for(var o,c=s[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var u=o.value;if(u==r.searchKeyWords)return!1}}catch(v){i=!0,n=v}finally{try{a||null==c.return||c.return()}finally{if(i)throw n}}s.pop(),s.unshift(r.searchKeyWords)}else{var l=!0,h=!1,d=void 0;try{for(var f,y=s[Symbol.iterator]();!(l=(f=y.next()).done);l=!0){var g=f.value;if(g==r.searchKeyWords)return!1}}catch(v){h=!0,d=v}finally{try{l||null==y.return||y.return()}finally{if(h)throw d}}s.unshift(r.searchKeyWords)}r.searchHisKeyList=s,e.setStorage({key:"search_history",data:r.searchHisKeyList})},fail:function(){r.searchHisKeyList=[],r.searchHisKeyList.push(r.searchKeyWords),e.setStorage({key:"search_history",data:r.searchHisKeyList})}}),e.showLoading({title:"搜索中..."}),setTimeout(function(){a=!1,e.hideLoading(),e.showToast({title:"网络未知错误",icon:"none",duration:1e3})},5e3),e.request({url:r.$serverUrl+"/article/searchArticleYANG",method:"POST",data:{articleContent:r.searchKeyWords,userId:r.userInfo.id,isSaveRecord:s,page:t},success:function(s){if(a=!1,e.hideLoading(),r.searching=!1,200==s.data.status){1==r.currentPage&&(r.searchedArticleList=[]);var i=s.data.data.rows,n=r.searchedArticleList;r.searchedArticleList=n.concat(i),r.currentPage=t,r.totalPage=s.data.data.total}},fail:function(e){console.log("index unirequest fail"),console.log(e)}})):e.showToast({title:"搜索内容不能为空",duration:1e3,icon:"none"})}},loadMore:function(){var t=this,r=t.currentPage;console.log("currentpage is "+r);var s=t.totalPage;if(console.log("totalpage is "+s),r==s)e.showToast({title:"没有更多文章了",icon:"none",duration:1e3});else{var a=r+1;t.search(a)}},searchDeleteAll:function(){var t=this;e.showModal({title:"提示",content:"确定删除所有历史记录吗?",success:function(r){r.confirm?(t.searchHisKeyList=[],e.setStorage({key:"search_history",data:t.searchHisKeyList})):r.cancle}})},searchCancle:function(e){this.searching=!e},exitSearch:function(){this.hotList="",this.searchKeyWords="",this.searchedArticleList="",this.$emit("exitSearchSignal",0)},putHotIntoInput:function(e){var t=this.hotList[e];this.searchKeyWords=t},putHisIntoInput:function(e){var t=this.searchHisKeyList[e];this.searchKeyWords=t}}};t.default=i}).call(this,r("543d")["default"])},"2bfd":function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement;e._self._c},a=[];r.d(t,"a",function(){return s}),r.d(t,"b",function(){return a})},"86e7":function(e,t,r){},ca3e:function(e,t,r){"use strict";var s=r("86e7"),a=r.n(s);a.a}},[["aeac","common/runtime","common/vendor"]]]);