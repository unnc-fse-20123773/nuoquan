(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/messagelist/messagelist"],{8334:function(t,e,n){},"8ebb":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a})},bc34:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("2f62");function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){i(t,e,n[e])})}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s,r=function(){return n.e("components/swipe-action").then(n.bind(null,"9714"))},u={components:{swipeAction:r},data:function(){return{focus:!1,isShowView:!0,msgicon:[],chatSnapShotList:"",READ:this.chat.READ,UNREAD:this.chat.UNREAD,uLikeMsgCount:t.getStorageSync("likeMsgCount"),uCommentMsgCount:t.getStorageSync("commentMsgCount")}},computed:a({},(0,o.mapState)(["chatMessageCard","likeMsgCount","commentMsgCount"])),watch:{chatMessageCard:function(t,e){this.loadingChatSnapshot()},likeMsgCount:function(t,e){this.uLikeMsgCount=t},commentMsgCount:function(t,e){this.uCommentMsgCount=t}},onLoad:function(){t.setNavigationBarTitle({title:"消息列表"}),s=this.getGlobalUserInfo(),this.isNull(s)&&console.log("No userInfo!!")},onShow:function(){this.loadingChatSnapshot()},methods:{loadingChatSnapshot:function(){var e=this.chat.getUserChatSnapShot(s.id);this.chatSnapShotList=e;var n=0,o=0;console.log(e);for(var a=0;a<e.length;a++){var i=e[a].friendId,r=this.getUserInfoFromUserList(i);if(this.isNull(r)){n++;var u=this;t.request({url:u.$serverUrl+"/user/queryUser",method:"POST",data:{userId:i},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){200==t.data.status&&(r=t.data.data,u.setUserInfoToUserList(r),o++,console.log("sendCount="+n+" receiveCount="+o),n==o&&u.loadingChatSnapshot())}})}else e[a].friendInfo=r}},deleteChat:function(t){var e=t.friendId;this.chat.deletUserChatHistory(s.id,e),this.chat.deletUserChatSnapShot(s.id,e),this.loadingChatSnapshot()},goToChatpage:function(e){var n=e.myId,o=e.friendId,a=(e.msg,e.friendInfo);this.chat.readUserChatSnapShot(n,o),t.navigateTo({url:"../chatpage/chatpage?friendInfo="+JSON.stringify(a)})},goToCmtLikeDetail:function(e){0==e?this.$store.commit("setLikeMsgCount",0):this.$store.commit("setCommentMsgCount",0),t.navigateTo({url:"../cmt-likedetail/cmt-likedetail?currentTab="+JSON.stringify(e)})}}};e.default=u}).call(this,n("543d")["default"])},ea12:function(t,e,n){"use strict";var o=n("8334"),a=n.n(o);a.a},f891:function(t,e,n){"use strict";n.r(e);var o=n("bc34"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);e["default"]=a.a},fc7e:function(t,e,n){"use strict";n.r(e);var o=n("8ebb"),a=n("f891");for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);n("ea12");var s=n("2877"),r=Object(s["a"])(a["default"],o["a"],o["b"],!1,null,null,null);e["default"]=r.exports}},[["d251","common/runtime","common/vendor"]]]);