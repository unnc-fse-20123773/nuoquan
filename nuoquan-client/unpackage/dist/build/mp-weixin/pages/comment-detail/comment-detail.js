(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/comment-detail/comment-detail"],{"05b9":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i})},"2bc6":function(t,e,n){"use strict";n.r(e);var o=n("05b9"),i=n("6042");for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);n("681f");var a=n("2877"),m=Object(a["a"])(i["default"],o["a"],o["b"],!1,null,null,null);e["default"]=m.exports},6042:function(t,e,n){"use strict";n.r(e);var o=n("d674"),i=n.n(o);for(var s in o)"default"!==s&&function(t){n.d(e,t,function(){return o[t]})}(s);e["default"]=i.a},"681f":function(t,e,n){"use strict";var o=n("dfe2"),i=n.n(o);i.a},d674:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){return n.e("pages/comment-detail/sonCommentBox").then(n.bind(null,"3d84"))},i={components:{sonCommentBox:o},data:function(){return{mainComment:"",userInfo:"",commentContent:"",commentList:"",showInput:!1,writingComment:!1,submitData:{},placeholderText:"评论点什么吧......",totalPage:1,currentPage:1}},onLoad:function(e){t.setNavigationBarTitle({title:"回复"});var n=this.getGlobalUserInfo();this.userInfo=n,this.mainComment=JSON.parse(e.data),this.getSubComments(1)},onReachBottom:function(){this.loadMore()},methods:{getSubComments:function(e){var n=this;t.request({method:"POST",url:n.$serverUrl+"/article/getSubComments",data:{underCommentId:n.mainComment.id,userId:n.userInfo.id,page:e},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){if(200==t.data.status){1==e&&(n.commentList=[]);var o=t.data.data.rows,i=n.commentList;n.commentList=i.concat(o),n.currentPage=e,n.totalPage=t.data.data.total}}})},loadMore:function(){var e=this,n=e.currentPage;console.log(n);var o=e.totalPage;if(console.log(o),n==o)t.showToast({title:"没有更多评论了",icon:"none",duration:1e3});else{var i=n+1;e.getSubComments(i)}},controlInput:function(t){0!=t&&1!=t?(this.placeholderText="回复 @"+t.nickname+" 的评论",delete t.nickname,this.submitData=t,this.showInput=!0,this.writingComment=!0,console.log(this.writingComment)):1==t?(this.submitData.toUserId=this.mainComment.fromUserId,this.submitData.fatherCommentId=this.mainComment.id,this.submitData.underCommentId=this.mainComment.id,this.showInput=!0,this.writingComment=!0,console.log("this is control input in detail. a =="+t),console.log(this.submitData)):(console.log("this is control input in detail. a ==0, EXIT"),this.submitData={},this.placeholderText="评论",this.showInput=!1,this.writingComment=!1)},saveComment:function(){this.submitData.comment=this.commentContent,this.submitData.fromUserId=this.userInfo.id,this.submitData.articleId=this.mainComment.articleId;var e=this;""==this.commentContent?t.showToast({title:"好像忘写评论了哦~",duration:1e3,icon:"none"}):t.request({url:e.$serverUrl+"/article/saveComment",method:"POST",data:this.submitData,success:function(t){e.writingComment=!1,e.commentContent="",e.showInput=!1,e.commentList="",e.$nextTick(function(){e.getSubComments(1)})}})},swLikeComment:function(t){t.isLike?(this.unLikeComment(t),t.likeNum--):(this.likeComment(t),t.likeNum++),t.isLike=!t.isLike},likeComment:function(e){console.log("点赞评论");var n=this;t.request({method:"POST",url:n.$serverUrl+"/article/userLikeComment",data:{userId:n.userInfo.id,commentId:e.id,createrId:e.fromUserId},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){console.log(t)}})},unLikeComment:function(e){console.log("取消点赞评论");var n=this;t.request({method:"POST",url:n.$serverUrl+"/article/userUnLikeComment",data:{userId:n.userInfo.id,commentId:e.id,createrId:e.fromUserId},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){console.log(t)}})},goToPersonPublic:function(){t.navigateTo({url:"/pages/personpublic/personpublic?userId="+this.mainComment.fromUserId})}}};e.default=i}).call(this,n("543d")["default"])},dfe2:function(t,e,n){}},[["be39","common/runtime","common/vendor"]]]);