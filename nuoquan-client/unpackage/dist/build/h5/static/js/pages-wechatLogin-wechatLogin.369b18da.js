(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-wechatLogin-wechatLogin"],{"22d2":function(e,t,n){"use strict";n.r(t);var a=n("8455"),o=n("67fc");for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);var u=n("2877"),s=Object(u["a"])(o["default"],a["a"],a["b"],!1,null,"4672fffb",null);t["default"]=s.exports},"67fc":function(e,t,n){"use strict";n.r(t);var a=n("f69f"),o=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);t["default"]=o.a},8455:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-button",{attrs:{type:"primary","open-type":"getUserInfo",withCredentials:"true"},on:{getuserinfo:function(t){t=e.$handleEvent(t),e.getUserInfo(t)}}},[e._v("微信登陆授权")]),n("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){t=e.$handleEvent(t),e.removeUserInfo(t)}}},[e._v("[dev]清除用户信息缓存")]),n("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){t=e.$handleEvent(t),e.clearStorage(t)}}},[e._v("[dev]清除缓存")]),e._v("userId："),n("v-uni-input",{model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}}),n("v-uni-button",{on:{click:function(t){t=e.$handleEvent(t),e.testLogIn(t)}}},[e._v("测试用登陆")])],1)},o=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o})},f69f:function(e,t,n){"use strict";var a=n("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("f499")),r={data:function(){return{userId:""}},onLoad:function(){},methods:{getUserInfo:function(){var e=this,t=this;uni.login({success:function(n){uni.getUserInfo({success:function(a){uni.request({url:t.$serverUrl+"/user/getWxUserInfo",method:"POST",data:{encryptedData:a.encryptedData,iv:a.iv,code:n.code,nickname:a.userInfo.nickName,faceImg:a.userInfo.avatarUrl},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){if(200==t.data.status){var n=t.data.data;n=e.myUser(n),e.setGlobalUserInfo(n),console.log(n),uni.navigateBack({delta:1})}}})}})}})},setUser:function(e){var t,n=this,a={id:"test-id123",nickname:e.nickName,faceImg:e.avatarUrl};console.log(e);var r=this;uni.request({url:r.$serverUrl+"/user/updateUser",method:"POST",data:(0,o.default)(a),header:{"content-type":"application/json"},success:function(e){console.log(e),200==e.data.status&&(t=e.data.data,t=n.myUser(t),n.setGlobalUserInfo(t),console.log(t),uni.navigateBack({delta:1}))}})},removeUserInfo:function(){this.removeGlobalUserInfo(),console.log("用户信息缓存已清除")},clearStorage:function(){uni.clearStorage(),console.log("所有缓存已清除")},testLogIn:function(){var e=this;console.log(this.userId);var t=this;uni.request({url:t.$serverUrl+"/user/queryUser",method:"POST",data:{userId:t.userId},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){if(console.log(t),200==t.data.status){var n=t.data.data;e.setGlobalUserInfo(n),uni.navigateBack({delta:1})}}})}}};t.default=r}}]);