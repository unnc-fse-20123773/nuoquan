(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/comment-detail/comment-detail"],{"200d":function(t,e,i){},3436:function(t,e,i){"use strict";var n=i("a42e"),o=i.n(n);o.a},"40d3":function(t,e,i){"use strict";i.r(e);var n=i("75db"),o=i("bac2");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("cd71");var a=i("2877"),c=Object(a["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=c.exports},"45e9":function(t,e,i){"use strict";i.r(e);var n=i("4afb"),o=i("b4f8");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("3436");var a=i("2877"),c=Object(a["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=c.exports},"4afb":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",[i("view",{staticClass:"commentBox"},[i("view",{staticClass:"cmtdetail-IDline"},[i("view",{staticClass:"cmtdetail-IDrel"},[i("view",{staticClass:"cmtdetail-profilePic"},[i("image",{staticClass:"profilePic",attrs:{src:t.mainComment.faceImg,mode:"aspectFill",eventid:"270f3984-0"},on:{tap:t.goToPersonPublic}})]),i("view",{staticClass:"cmtdetail-middle"},[i("view",{staticClass:"cmtdetail-IDtext"},[t._v(t._s(t.mainComment.nickname))]),i("view",{staticClass:"cmtdetail-time"},[t._v(t._s(t.mainComment.timeAgo))])]),i("view",{staticClass:"cmtdetail-right"},[i("view",{staticClass:"cmtdetail-rightrel"},[i("view",{attrs:{eventid:"270f3984-1"},on:{tap:function(e){t.swLikeComment(t.mainComment)}}},[t.mainComment.isLike?t._e():i("image",{staticClass:"likeIcon",attrs:{src:"../../static/icon/like.png",mode:"aspectFill"}}),t.mainComment.isLike?i("image",{staticClass:"likeIcon",attrs:{src:"../../static/icon/liked.png",mode:"aspectFill"}}):t._e(),i("text",{staticClass:"likeNum",class:{liked:t.mainComment.isLike}},[t._v(t._s(t.mainComment.likeNum))])]),i("image",{staticClass:"commentIcon",attrs:{src:"../../static/icon/message.png",mode:"aspectFill"}})])])])]),i("view",{staticClass:"cmtdetail-contentBox",attrs:{id:"contentBox",eventid:"270f3984-2"},on:{click:function(e){t.controlInput(1)}}},[t._v(t._s(t.mainComment.comment))]),i("view",{staticStyle:{height:"2px",width:"74%","margin-left":"62px","background-color":"#E4E4E4","margin-top":"10px"}})]),i("view",{staticStyle:{width:"100%"}},[t._l(t.commentList,function(e,n){return i("sonCommentBox",{key:e.id,attrs:{reCommentDetail:e,eventid:"270f3984-3-"+n,mpcomid:"270f3984-0-"+n},on:{controlInputSignal:t.controlInput,swLikeComment:t.swLikeComment,goToPersonPublic:t.goToPersonPublic}})}),i("view",{staticStyle:{width:"100%",height:"40px"}})],2),i("view",{staticClass:"bottomLayerOfSubmit"},[i("view",{staticClass:"submitComment",attrs:{eventid:"270f3984-4"},on:{click:function(e){t.controlInput(1)}}},[t._v("发 表 评 论")])]),i("view",{directives:[{name:"show",rawName:"v-show",value:t.showInput,expression:"showInput"}],staticClass:"bottoLayerOfInput",attrs:{eventid:"270f3984-8"},on:{tap:function(e){t.controlInput(0)},touchmove:function(e){t.controlInput(0)}}},[i("view",{staticClass:"commentPart",style:{bottom:t.textAreaAdjust},attrs:{eventid:"270f3984-7"},on:{click:function(t){t.stopPropagation()}}},[i("view",{staticClass:"emoji"}),i("view",{staticClass:"submit",attrs:{eventid:"270f3984-5"},on:{click:function(e){t.saveComment()}}}),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentContent,expression:"commentContent"}],staticClass:"commentSth",attrs:{placeholder:t.placeholderText,focus:t.writingComment,"auto-height":"true","adjust-position":"false","show-confirm-bar":!1,eventid:"270f3984-6"},domProps:{value:t.commentContent},on:{click:function(t){t.stopPropagation()},input:function(e){e.target.composing||(t.commentContent=e.target.value)}}})])])])},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},"61cf":function(t,e,i){"use strict";i("5ad9");var n=s(i("b0ce")),o=s(i("45e9"));function s(t){return t&&t.__esModule?t:{default:t}}Page((0,n.default)(o.default))},"75db":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",[i("view",{staticClass:"son-commentBox"},[i("view",{staticClass:"cmtdetail-IDline"},[i("view",{staticClass:"cmtdetail-IDrel"},[i("view",{staticClass:"son-cmtdetail-profilePic"},[i("image",{staticClass:"son-profilePic",attrs:{src:t.commentDetail.faceImg,mode:"aspectFill"}})]),i("view",{staticClass:"cmtdetail-middle"},[i("view",{staticClass:"cmtdetail-IDtext"},[t._v(t._s(t.commentDetail.nickname))]),i("view",{staticClass:"cmtdetail-time"},[t._v(t._s(t.commentDetail.timeAgo))])]),i("view",{staticClass:"cmtdetail-right"},[i("view",{staticClass:"cmtdetail-rightrel",attrs:{eventid:"15c3bf79-0"},on:{tap:function(e){t.swLikeComment()}}},[t.commentDetail.isLike?i("image",{staticClass:"son-likeIcon",attrs:{src:"../../static/icon/liked.png",mode:"aspectFill"}}):i("image",{staticClass:"son-likeIcon",attrs:{src:"../../static/icon/like.png",mode:"aspectFill"}}),i("text",{staticClass:"son-likeNum",class:{liked:t.commentDetail.isLike}},[t._v(t._s(t.commentDetail.likeNum))])])])])]),i("view",{staticClass:"cmtdetail-contentBox",attrs:{id:"contentBox",eventid:"15c3bf79-1"},on:{tap:function(e){t.controlIputInSonCommentBox()}}},[t._v("回复@"+t._s(t.commentDetail.toNickname)+": "+t._s(t.commentDetail.comment))]),i("view",{staticStyle:{height:"2px",width:"74%","margin-left":"62px","background-color":"#E4E4E4","margin-top":"10px"}})])])},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},9871:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("40d3"));function o(t){return t&&t.__esModule?t:{default:t}}var s={components:{sonCommentBox:n.default},data:function(){return{mainComment:"",userInfo:"",commentContent:"",commentList:"",showInput:!1,writingComment:!1,submitData:{},placeholderText:"评论点什么吧......",totalPage:1,currentPage:1}},onLoad:function(e){t.setNavigationBarTitle({title:"回复"});var i=this.getGlobalUserInfo();this.userInfo=i,this.mainComment=JSON.parse(e.data),this.getSubComments(1)},onReachBottom:function(){this.loadMore()},methods:{getSubComments:function(e){var i=this;t.request({method:"POST",url:i.$serverUrl+"/article/getSubComments",data:{underCommentId:i.mainComment.id,userId:i.userInfo.id,page:e},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){if(200==t.data.status){1==e&&(i.commentList=[]);var n=t.data.data.rows,o=i.commentList;i.commentList=o.concat(n),i.currentPage=e,i.totalPage=t.data.data.total}}})},loadMore:function(){var e=this,i=e.currentPage;console.log(i);var n=e.totalPage;if(console.log(n),i==n)t.showToast({title:"没有更多评论了",icon:"none",duration:1e3});else{var o=i+1;e.getSubComments(o)}},controlInput:function(t){0!=t&&1!=t?(this.placeholderText="回复 @"+t.nickname+" 的评论",delete t.nickname,this.submitData=t,this.showInput=!0,this.writingComment=!0,console.log(this.writingComment)):1==t?(this.submitData.toUserId=this.mainComment.fromUserId,this.submitData.fatherCommentId=this.mainComment.id,this.submitData.underCommentId=this.mainComment.id,this.showInput=!0,this.writingComment=!0,console.log("this is control input in detail. a =="+t),console.log(this.submitData)):(console.log("this is control input in detail. a ==0, EXIT"),this.submitData={},this.placeholderText="评论",this.showInput=!1,this.writingComment=!1)},saveComment:function(){this.submitData.comment=this.commentContent,this.submitData.fromUserId=this.userInfo.id,this.submitData.articleId=this.mainComment.articleId;var e=this;""==this.commentContent?t.showToast({title:"好像忘写评论了哦~",duration:1e3,icon:"none"}):t.request({url:e.$serverUrl+"/article/saveComment",method:"POST",data:this.submitData,success:function(t){e.writingComment=!1,e.commentContent="",e.showInput=!1,e.commentList="",e.$nextTick(function(){e.getSubComments(1)})}})},swLikeComment:function(t){t.isLike?(this.unLikeComment(t),t.likeNum--):(this.likeComment(t),t.likeNum++),t.isLike=!t.isLike},likeComment:function(e){console.log("点赞评论");var i=this;t.request({method:"POST",url:i.$serverUrl+"/article/userLikeComment",data:{userId:i.userInfo.id,commentId:e.id,createrId:e.fromUserId},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){console.log(t)}})},unLikeComment:function(e){console.log("取消点赞评论");var i=this;t.request({method:"POST",url:i.$serverUrl+"/article/userUnLikeComment",data:{userId:i.userInfo.id,commentId:e.id,createrId:e.fromUserId},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){console.log(t)}})},goToPersonPublic:function(){t.navigateTo({url:"/pages/personpublic/personpublic?userId="+this.mainComment.fromUserId})}}};e.default=s}).call(this,i("6e42")["default"])},a42e:function(t,e,i){},b4f8:function(t,e,i){"use strict";i.r(e);var n=i("9871"),o=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);e["default"]=o.a},bac2:function(t,e,i){"use strict";i.r(e);var n=i("d903"),o=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);e["default"]=o.a},cd71:function(t,e,i){"use strict";var n=i("200d"),o=i.n(n);o.a},d903:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{reCommentDetail:""},data:function(){return{commentDetail:this.reCommentDetail}},created:function(){console.log(this.reCommentDetail)},onLoad:function(){console.log("哈哈哈哈哈哈")},methods:{controlIputInSonCommentBox:function(){var t={toUserId:this.reCommentDetail.fromUserId,fatherCommentId:this.reCommentDetail.id,underCommentId:this.reCommentDetail.underCommentId,nickname:this.reCommentDetail.nickname};this.$emit("controlInputSignal",t)},swLikeComment:function(){this.$emit("swLikeComment",this.commentDetail)},goToPersonPublic:function(){this.$emit("goToPersonPublic",this.commentDetail.fromUserId)}}};e.default=n}},[["61cf","common/runtime","common/vendor"]]]);