(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/personpublic/personpublic"],{7563:function(t,e,n){"use strict";var s=n("ab31"),a=n.n(s);a.a},8191:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,a=i(n("a34a"));function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n,s,a,i,o){try{var r=t[i](o),u=r.value}catch(c){return void n(c)}r.done?e(u):Promise.resolve(u).then(s,a)}function r(t){return function(){var e=this,n=arguments;return new Promise(function(s,a){var i=t.apply(e,n);function r(t){o(i,s,a,r,u,"next",t)}function u(t){o(i,s,a,r,u,"throw",t)}r(void 0)})}}var u={data:function(){return{scrollLeft:0,isClickChange:!1,currentTab:0,menuTabs:[{name:"动态"},{name:"帖子"},{name:"点赞"},{name:"评论"}],swiperDateList:[[],[],[],[],[],[]],screenWidth:350,serverUrl:"",thisUserInfo:"",myPublic:!1}},changeIndicatorDots:function(t){this.indicatorDots=!this.indicatorDots},changeAutoplay:function(t){this.autoplay=!this.autoplay},intervalChange:function(t){this.interval=t.target.value},durationChange:function(t){this.duration=t.target.value},onLoad:function(e){var n=e.userId;s=this.getGlobalUserInfo(),s.id==n&&(this.myPublic=!0);var a=t.getSystemInfoSync().screenWidth;this.screenWidth=a;this.page;this.queryUserWithFollow(n)},onPullDownRefresh:function(){console.log("refresh"),setTimeout(function(){t.stopPullDownRefresh()},1e3)},methods:{swichMenu:function(){var t=r(a.default.mark(function t(e){return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.currentTab!=e){t.next=4;break}return t.abrupt("return",!1);case 4:this.currentTab=e,this.setScrollLeft(e);case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),swiperChange:function(){var t=r(a.default.mark(function t(e){var n;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:n=e.target.current,this.setScrollLeft(n),this.currentTab=n;case 3:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),setScrollLeft:function(){var e=r(a.default.mark(function e(n){var s,i,o,r;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:s=0,i=0;case 2:if(!(i<=n)){e.next=10;break}return e.next=5,this.getWidth("tabNum"+i);case 5:o=e.sent,s+=o.width;case 7:i++,e.next=2;break;case 10:r=t.getSystemInfoSync().windowWidth,this.scrollLeft=s>r?s-r:0;case 12:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),getWidth:function(e){return new Promise(function(n,s){t.createSelectorQuery().select("#"+e).fields({size:!0,scrollOffset:!0},function(t){n(t)}).exec()})},loadMore:function(t){console.log("正在加载更多数据。。。"),this.getDateList(t)},addFollow:function(e){console.log("加关注...");var n=this;t.request({url:n.$serverUrl+"/user/follow",method:"POST",data:{userId:e,fanId:s.id},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){200==t.data.status&&n.queryUserWithFollow(e)}})},cancelFollow:function(e){console.log("取关...");var n=this;t.request({url:n.$serverUrl+"/user/dontFollow",method:"POST",data:{userId:e,fanId:s.id},header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){200==t.data.status&&n.queryUserWithFollow(e)}})},goToChatPage:function(){var e=this.thisUserInfo;t.redirectTo({url:"../chatpage/chatpage?friendInfo="+JSON.stringify(e)})},goToFansFollow:function(e){console.log("goToFansFollow...");var n={currentTab:e,thisUserInfo:this.thisUserInfo};t.redirectTo({url:"../followlist/followlist?data="+JSON.stringify(n)})},queryUserWithFollow:function(e){var n=this;t.request({url:n.$serverUrl+"/user/queryUserWithFollow",method:"POST",data:{userId:e,fanId:s.id},header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){200==e.data.status&&(n.thisUserInfo=e.data.data,n.setUserInfoToUserList(e.data.data),t.setNavigationBarTitle({title:n.thisUserInfo.nickname+"的主页"}))}})}}};e.default=u}).call(this,n("6e42")["default"])},ab31:function(t,e,n){},c72a:function(t,e,n){"use strict";n.r(e);var s=n("8191"),a=n.n(s);for(var i in s)"default"!==i&&function(t){n.d(e,t,function(){return s[t]})}(i);e["default"]=a.a},da6d:function(t,e,n){"use strict";n("5ad9");var s=i(n("b0ce")),a=i(n("edb7"));function i(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(a.default))},edb7:function(t,e,n){"use strict";n.r(e);var s=n("f62b"),a=n("c72a");for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);n("7563");var o=n("2877"),r=Object(o["a"])(a["default"],s["a"],s["b"],!1,null,null,null);e["default"]=r.exports},f62b:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{attrs:{id:"public-container"}},[n("view",{staticClass:"column_center",attrs:{id:"public-infobox"}},[n("image",{staticClass:"publicTouxiang",attrs:{mode:"aspectFill",src:t.thisUserInfo.faceImg}}),n("view",{staticClass:"personInfo"},[n("view",{staticClass:"personName"},[n("text",{staticClass:"personName-text"},[t._v(t._s(t.thisUserInfo.nickname))])]),n("view",{staticClass:"personFans super_center",attrs:{eventid:"fb823338-0"},on:{tap:function(e){t.goToFansFollow(0)}}},[n("text",{staticClass:"personFans-text"},[t._v("他关注的")]),n("text",{staticClass:"personFansNum-text"},[t._v(t._s(t.thisUserInfo.followNum))])]),n("view",{staticClass:"personFans super_center",attrs:{eventid:"fb823338-1"},on:{tap:function(e){t.goToFansFollow(1)}}},[n("text",{staticClass:"personFans-text"},[t._v("关注他的")]),n("text",{staticClass:"personFansNum-text"},[t._v(t._s(t.thisUserInfo.fansNum))])])]),t.myPublic?t._e():n("view",{staticStyle:{width:"36%",display:"flex",position:"fixed",right:"10rpx",top:"148rpx"}},[n("view",{staticClass:"messageButton super_center",attrs:{eventid:"fb823338-2"},on:{tap:t.goToChatPage}},[n("image",{staticStyle:{width:"24px",height:"24px"},attrs:{src:"../../static/icon/comments_pub.png",mode:"scaleToFill"}})]),n("view",{staticClass:"guanzhuButton-Box"},[1==t.thisUserInfo.follow?n("button",{staticClass:"guanzhuButton",staticStyle:{border:"2rpx solid white"},attrs:{type:"default",size:"mini",plain:"true",eventid:"fb823338-3"},on:{tap:function(e){t.cancelFollow(t.thisUserInfo.id)}}},[n("text",{staticClass:"guanzhuButton-text",staticStyle:{color:"white"}},[t._v("已关注")])]):t._e()],1),n("view",{staticClass:"guanzhuButton-Box"},[0==t.thisUserInfo.follow?n("button",{staticClass:"guanzhuButton",attrs:{type:"default",size:"mini",eventid:"fb823338-4"},on:{tap:function(e){t.addFollow(t.thisUserInfo.id)}}},[n("text",{staticClass:"guanzhuButton-text"},[t._v("关注")])]):t._e()],1)])]),n("view",{attrs:{id:"public-message-futherbox"}},[n("scroll-view",{staticClass:"top-menu-view",attrs:{"scroll-x":"true","scroll-left":"scrollLeft"}},t._l(t.menuTabs,function(e,s){return n("block",{key:s},[n("view",{staticClass:"menu-one-view",attrs:{id:"tabNum"+s,eventid:"fb823338-5-"+s},on:{click:function(e){t.swichMenu(s)}}},[n("view",{class:[t.currentTab==s?"menu-one-act":"menu-one"]},[n("view",{staticClass:"menu-one-txt"},[t._v(t._s(e.name))]),n("view",{staticClass:"menu-one-bottom"},[n("view",{staticClass:"menu-one-bottom-color"})])])])])})),n("swiper",{staticClass:"swiper-box-list",attrs:{current:t.currentTab,duration:"300",eventid:"fb823338-7"},on:{change:t.swiperChange}},t._l(t.swiperDateList,function(e,s){return n("block",{key:s},[n("swiper-item",{attrs:{mpcomid:"fb823338-0-"+s}},[n("scroll-view",{staticClass:"swiper-one-list",attrs:{"scroll-y":"true",eventid:"fb823338-6-"+s},on:{scrolltolower:function(e){t.loadMore(s)}}},[n("view",{staticClass:"warning-text-box super_center"},[n("view",{staticClass:"warning-text"},[t._v("Function under developed.")])])])],1)],1)}))],1)])},a=[];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a})}},[["da6d","common/runtime","common/vendor"]]]);