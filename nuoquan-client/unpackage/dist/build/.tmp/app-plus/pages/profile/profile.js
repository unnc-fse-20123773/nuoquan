(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/profile/profile"],{"1b59":function(e,t,i){"use strict";var r=i("fc97"),a=i.n(r);a.a},"2c80":function(e,t,i){"use strict";i.r(t);var r=i("e2a7"),a=i.n(r);for(var s in r)"default"!==s&&function(e){i.d(t,e,function(){return r[e]})}(s);t["default"]=a.a},"2f91":function(e,t,i){"use strict";i("5ad9");var r=s(i("b0ce")),a=s(i("d5b3"));function s(e){return e&&e.__esModule?e:{default:e}}Page((0,r.default)(a.default))},"5b56":function(e,t,i){"use strict";var r=i("f664"),a=i.n(r);a.a},"5c0c":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={name:"mypicker",props:{dataList:"",value:""},data:function(){return{title:"picker-view",visible:!0,indicatorStyle:"height: ".concat(Math.round(e.getSystemInfoSync().screenWidth/8.5),"px;"),maskStyle:""}},onBackPress:function(){console.log("get")},methods:{bindChange:function(e){var t=e.detail.value;this.$emit("change",t)},tapBackground:function(){this.$emit("tapBackground")}}};t.default=i}).call(this,i("6e42")["default"])},"64c7":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",[i("view",{staticStyle:{height:"100%",width:"100%",position:"fixed",left:"0",top:"0"},attrs:{eventid:"4a619e93-0"},on:{tap:e.tapBackground}}),i("view",{staticStyle:{position:"relative",height:"180px",width:"70px"}},[i("view",{staticClass:"picker-shadow"}),e.visible?i("picker-view",{staticStyle:{width:"70px",height:"180px",position:"relative",top:"2px",left:"2px"},attrs:{"indicator-style":e.indicatorStyle,value:e.value,"mask-style":e.maskStyle,eventid:"4a619e93-1"},on:{change:e.bindChange}},[i("picker-view-column",{attrs:{mpcomid:"4a619e93-0"}},e._l(e.dataList,function(t,r){return i("view",{key:r,staticClass:"item"},[e._v(e._s(t))])}))],1):e._e()],1)])},a=[];i.d(t,"a",function(){return r}),i.d(t,"b",function(){return a})},"85b7":function(e,t,i){"use strict";i.r(t);var r=i("5c0c"),a=i.n(r);for(var s in r)"default"!==s&&function(e){i.d(t,e,function(){return r[e]})}(s);t["default"]=a.a},"935e":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",{attrs:{id:"profile-container"}},[i("view",{attrs:{id:"yellow-box"}}),i("form",{attrs:{eventid:"624d1d78-11"},on:{submit:e.formSubmit,reset:e.formReset}},[i("view",{staticClass:"profile-basicinfo-card column_center"},[i("image",{staticClass:"profileTouxiang",attrs:{mode:"aspectFill",src:e.userInfo.faceImg}}),0==e.isEdit?i("view",{staticClass:"profileText-box"},[i("text",{staticClass:"left-profileText1 "},[e._v("昵称")]),null!=e.userInfo.nickname?i("text",{staticClass:"right-profileText1"},[e._v(e._s(e.userInfo.nickname))]):i("text",{staticClass:"right-profileText1"},[e._v("待设置")]),i("text",{staticClass:"left-profileText2"},[e._v("性别")]),null==e.userInfo.gender||-1==e.userInfo.gender?i("text",{staticClass:"right-profileText2"},[e._v("待设置")]):i("text",{staticClass:"right-profileText2"},[e._v(e._s(e.genderList[e.userInfo.gender]))])]):e._e(),1==e.isEdit?i("view",{staticClass:"profileText-box"},[i("text",{staticClass:"left-profileText1 "},[e._v("昵称")]),i("text",{staticClass:"right-remind "},[e._v("最长 8 位")]),i("input",{staticClass:"right-profileText1-1",staticStyle:{"text-align":"right","min-height":"1rpx",height:"26px"},attrs:{maxlength:"8",value:e.userInfo.nickname,name:"nickname"}}),i("view",{staticClass:"input-border"}),i("text",{staticClass:"left-profileText2"},[e._v("性别")]),i("view",{staticClass:"genderPicker"},[i("view",{class:[1==e.gender?"genderPicker-buttonclick":"genderPicker-button"],attrs:{eventid:"624d1d78-0"},on:{click:function(t){e.genderChanger(1)}}},[i("text",{staticClass:"gender-text"},[e._v("男")])]),i("view",{class:[0==e.gender?"genderPicker-buttonclick":"genderPicker-button"],attrs:{eventid:"624d1d78-1"},on:{click:function(t){e.genderChanger(0)}}},[i("text",{staticClass:"gender-text"},[e._v("女")])]),i("view",{class:[2==e.gender?"genderPicker-buttonclick":"genderPicker-button"],attrs:{eventid:"624d1d78-2"},on:{click:function(t){e.genderChanger(2)}}},[i("text",{staticClass:"gender-text"},[e._v("其他")])])])]):e._e()]),i("view",{staticClass:"profile-moreinfo-card super_center"},[0==e.isEdit?i("view",{staticClass:"profilemoreText-box"},[i("text",{staticClass:"left-profileText1"},[e._v("学校邮箱")]),null!=e.userInfo.email?i("text",{staticClass:"right-profileText1"},[e._v(e._s(e.userInfo.email))]):i("text",{staticClass:"right-profileText1"},[e._v("待设置")]),i("text",{staticClass:"left-profileText2"},[e._v("毕业年份/专业")]),i("text",{staticClass:"right-profileText2"},[e._v(e._s(e.userInfo.graduationYear)+" "+e._s(e.userInfo.major))]),i("text",{staticClass:"left-profileText3"},[e._v("学位")]),i("text",{staticClass:"right-profileText3"},[e._v(e._s(e.degrees[e.userInfo.degree]))])]):e._e(),1==e.isEdit?i("view",{staticClass:"profilemoreText-box"},[i("text",{staticClass:"left-profileText1"},[e._v("学校邮箱")]),i("input",{staticClass:"right-profileText1-1",staticStyle:{width:"260px","text-align":"right","min-height":"1rpx",height:"26px"},attrs:{maxlength:"26",value:e.userInfo.email,name:"email"}}),i("view",{staticClass:"input-border2"}),i("text",{staticClass:"left-profileText2"},[e._v("毕业年份/专业")]),i("view",{staticClass:"yearPicker"},[i("view",{staticClass:"yearPicker-button",attrs:{eventid:"624d1d78-3"},on:{click:function(t){e.yearPickerChanger()}}},[i("text",{staticClass:"yearPicker-text"},[e._v(e._s(e.year))]),i("view",{staticClass:"year-pointer"},[i("image",{staticClass:"year-pointerIcon",attrs:{src:"../../static/icon/angle-down.png",mode:"scaleToFill"}})])]),i("view",{staticClass:"yearPicker-button",attrs:{eventid:"624d1d78-4"},on:{click:function(t){e.majorPickerChanger()}}},[i("text",{staticClass:"yearPicker-text"},[e._v(e._s(e.major))]),i("view",{staticClass:"year-pointer"},[i("image",{staticClass:"year-pointerIcon",attrs:{src:"../../static/icon/angle-down.png",mode:"scaleToFill"}})])])]),i("text",{staticClass:"left-profileText3"},[e._v("学位")]),i("view",{staticClass:"degreePicker"},[i("view",{staticClass:"yearPicker-button",attrs:{eventid:"624d1d78-5"},on:{click:function(t){e.degreePickerChanger()}}},[i("text",{staticClass:"yearPicker-text"},[e._v(e._s(e.degree))]),i("view",{staticClass:"year-pointer"},[i("image",{staticClass:"year-pointerIcon",attrs:{src:"../../static/icon/angle-down.png",mode:"scaleToFill"}})])])]),1==e.yearPicker?i("mypicker",{staticClass:"year-pick-style",attrs:{dataList:e.years,value:e.yearPickerVal,eventid:"624d1d78-6",mpcomid:"624d1d78-0"},on:{change:e.yearChange,tapBackground:function(t){e.yearPickerChanger()}}}):e._e(),1==e.majorPicker?i("mypicker",{staticClass:"major-pick-style",attrs:{dataList:e.majors,value:e.majorPickerVal,eventid:"624d1d78-7",mpcomid:"624d1d78-1"},on:{change:e.majorChange,tapBackground:function(t){e.majorPickerChanger()}}}):e._e(),1==e.degreePicker?i("mypicker",{staticClass:"degree-pick-style",attrs:{dataList:e.degrees,value:e.degreePickerVal,eventid:"624d1d78-8",mpcomid:"624d1d78-2"},on:{change:e.degreeChange,tapBackground:function(t){e.degreePickerChanger()}}}):e._e()],1):e._e()]),i("view",{staticStyle:{display:"flex",height:"5%"}},[0==e.isEdit?i("view",{staticClass:"editProfile super_center",attrs:{eventid:"624d1d78-9"},on:{click:function(t){e.editProfile(e.isEdit)}}},[i("text",{staticClass:"editProfile-text"},[e._v("编辑信息")])]):e._e(),1==e.isEdit?i("button",{staticClass:"editProfile-edit super_center",attrs:{formType:"submit"}},[i("text",{staticClass:"editProfile-text"},[e._v("完成修改")])]):e._e(),1==e.isEdit?i("button",{staticClass:"editProfile-cancle super_center",attrs:{eventid:"624d1d78-10"},on:{click:e.cancle}},[i("text",{staticClass:"editProfile-cancletext"},[e._v("取消")])]):e._e()],1)])],1)},a=[];i.d(t,"a",function(){return r}),i.d(t,"b",function(){return a})},be41:function(e,t,i){"use strict";i.r(t);var r=i("64c7"),a=i("85b7");for(var s in a)"default"!==s&&function(e){i.d(t,e,function(){return a[e]})}(s);i("c7cb"),i("1b59");var n=i("2877"),c=Object(n["a"])(a["default"],r["a"],r["b"],!1,null,null,null);t["default"]=c.exports},c7cb:function(e,t,i){"use strict";var r=i("d42d"),a=i.n(r);a.a},d42d:function(e,t,i){},d5b3:function(e,t,i){"use strict";i.r(t);var r=i("935e"),a=i("2c80");for(var s in a)"default"!==s&&function(e){i.d(t,e,function(){return a[e]})}(s);i("5b56");var n=i("2877"),c=Object(n["a"])(a["default"],r["a"],r["b"],!1,null,null,null);t["default"]=c.exports},e2a7:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(i("be41"));function a(e){return e&&e.__esModule?e:{default:e}}var s={data:function(){for(var e=new Date,t=[],i=e.getFullYear(),r=2004;r<=i+4;r++)t.push(r);var a=["AEE","ABE","CS","CEE","CIVE","ECON","EEE","ENGL","GEOG","IC","IS","MATH","PDM","NUBS"],s=["高中","本科","研究生"];return{genderList:["女","男","其他"],years:t,yearPickerVal:[],majors:a,majorPickerVal:[],degrees:s,degreePickerVal:[],gender:2,year:t[0],major:a[0],degree:s[1],degreeDB:"1",isEdit:!1,userInfo:"",yearPicker:!1,majorPicker:!1,degreePicker:!1}},components:{mypicker:r.default},onLoad:function(){e.setNavigationBarTitle({title:"个人信息"});var t=this.getGlobalUserInfo();this.userInfo=t;var i=t.gender,r=t.graduationYear,a=t.major,s=t.degree;this.isNull(i)||(this.gender=i),this.isNull(r)||(this.year=r),this.isNull(a)||(this.major=a),this.isNull(s)||(this.degree=this.degrees[s],this.degreeDB=s)},methods:{genderChanger:function(e){this.gender==e?(this.gender=-1,console.log(e)):this.gender=e},yearPickerChanger:function(){0==this.yearPicker?this.yearPicker=!0:this.yearPicker=!1},majorPickerChanger:function(){0==this.majorPicker?this.majorPicker=!0:this.majorPicker=!1},degreePickerChanger:function(){0==this.degreePicker?this.degreePicker=!0:this.degreePicker=!1},editProfile:function(e){0==e?this.isEdit=!0:1==e&&(this.isEdit=!1),console.log(this.isEdit)},cancle:function(){this.editProfile(this.isEdit)},yearChange:function(e){var t=this.years[e];this.year=t,this.yearPickerVal[0]=e},majorChange:function(e){var t=this.majors[e];this.major=t,this.majorPickerVal[0]=e},degreeChange:function(e){var t=this.degrees[e];this.degree=t,this.degreeDB=e[0],this.degreePickerVal[0]=e},formSubmit:function(t){var i=this,r=t.detail.value,a={id:this.userInfo.id,nickname:r.nickname,gender:this.gender,email:r.email,graduationYear:this.year,major:this.major,degree:this.degreeDB},s=this;e.request({url:s.$serverUrl+"/user/updateUser",method:"POST",data:JSON.stringify(a),header:{"content-type":"application/json"},success:function(e){if(200==e.data.status){var t=e.data.data,r=i.myUser(t);i.setGlobalUserInfo(r),i.userInfo=r,console.log(i.userInfo)}}}),this.editProfile(this.isEdit)},getIndex:function(e,t){for(var i=0;i<e.length;i++)if(e[i]==t)return i;return-1},test:function(e){console.log(e)}}};t.default=s}).call(this,i("6e42")["default"])},f664:function(e,t,i){},fc97:function(e,t,i){}},[["2f91","common/runtime","common/vendor"]]]);