{"version":3,"sources":["webpack:///C:/Users/WalkingDemon/Desktop/Git NQ/nuoquan/nuoquan-client/pages/tabPages/votePage.vue?8e2c","webpack:///C:/Users/WalkingDemon/Desktop/Git NQ/nuoquan/nuoquan-client/pages/tabPages/votePage.vue?de5c","webpack:///C:/Users/WalkingDemon/Desktop/Git NQ/nuoquan/nuoquan-client/pages/tabPages/votePage.vue?cab2","webpack:///C:/Users/WalkingDemon/Desktop/Git NQ/nuoquan/nuoquan-client/pages/tabPages/votePage.vue?6290","webpack:///C:/Users/WalkingDemon/Desktop/Git NQ/nuoquan/nuoquan-client/pages/tabPages/votePage.vue","webpack:///C:/Users/WalkingDemon/Desktop/Git NQ/nuoquan/nuoquan-client/pages/tabPages/votePage.vue?782b","webpack:///C:/Users/WalkingDemon/Desktop/Git NQ/nuoquan/nuoquan-client/pages/tabPages/votePage.vue?da70"],"names":["DEFAULT_PAGE","timer","components","uniNavBar","data","pageTitle","list","voteCardHeight","ischosen","menuButtonInfo","navigationBarHeight","ifShowComment","finishVote","persentBarWidth","onLoad","height","getnavbarHeight","bottom","console","log","calculateHeight","onShow","setTabBarIndex","methods","that","pageHeight","uni","getSystemInfo","success","res","windowHeight","switchChoose","selectedOptionId","voteIndex","ischosenFlag","currentVoteIndex","i","length","confirmVote","voteId","onePersentBarGrow","request","url","$serverUrl","method","optionId","userId","userInfo","id","header","afterSelectedResult","rows","showList","afterSelectedOptionList","optionList","clearInterval","setInterval","showVotes","page","loadVoteFlag","showLoading","title","setTimeout","hideLoading","showToast","icon","duration","newVoteList","oldVoteList","concat","currentPage","totalPage","total","fail"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuF;AAC3B;AACL;AACa;;;AAGpE;AAC2K;AAC3K,gBAAgB,gLAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,mFAAM;AACR,EAAE,4FAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACvCf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC7CA;AAAA;AAAA;AAAA;AAAqyB,CAAgB,qxBAAG,EAAC,C;;;;;;;;;;;;mICAzzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","file":"pages/tabPages/votePage.js","sourcesContent":["import { render, staticRenderFns } from \"./votePage.vue?vue&type=template&id=0d3e0c01&\"\nimport script from \"./votePage.vue?vue&type=script&lang=js&\"\nexport * from \"./votePage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./votePage.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\WalkingDemon\\\\Downloads\\\\HBuilderX.1.9.9.20190522.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('0d3e0c01', component.options)\n    } else {\n      api.reload('0d3e0c01', component.options)\n    }\n    module.hot.accept(\"./votePage.vue?vue&type=template&id=0d3e0c01&\", function () {\n      api.rerender('0d3e0c01', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Desktop/Git NQ/nuoquan/nuoquan-client/pages/tabPages/votePage.vue\"\nexport default component.exports","export * from \"-!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./votePage.vue?vue&type=template&id=0d3e0c01&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = this.getnavbarHeight()\n  var g1 = this.getnavbarHeight()\n\n  var l1 = _vm.__map(_vm.showList, function(item, index) {\n    var m0 = _vm.timeDeal(item.createDate)\n\n    var l0 = _vm.__map(item.optionList, function(result, index3) {\n      var m1 = _vm.reserveTwoDecimal(result.percent * 100)\n      var m2 = _vm.reserveTwoDecimal(result.percent * 100)\n      var m3 = _vm.reserveTwoDecimal(result.percent * 100)\n      var m4 = _vm.reserveTwoDecimal(result.percent * 100)\n      return {\n        $orig: _vm.__get_orig(result),\n        m1: m1,\n        m2: m2,\n        m3: m3,\n        m4: m4\n      }\n    })\n\n    var m5 = _vm.reTimeDeal(item.expiryDate)\n    return {\n      $orig: _vm.__get_orig(item),\n      m0: m0,\n      l0: l0,\n      m5: m5\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        l1: l1\n      }\n    }\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./votePage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./votePage.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nconst DEFAULT_PAGE = 0;\r\nvar timer = null;//进度条生长\r\nimport uniNavBar from \"@/components/uni-nav-bar/uni-nav-bar.vue\"\r\n\r\nexport default {\r\n\tcomponents:{\r\n\t\tuniNavBar\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tpageTitle: '投票',\r\n\t\t\tlist: ['Javascript', 'Typescript', 'Java', 'PHP', 'Go'],\r\n\t\t\tvoteCardHeight: 0,//单个投票卡片高度\r\n\t\t\tischosen: false,//判断选项是否选中\r\n\t\t\tmenuButtonInfo: '',\r\n\t\t\tnavigationBarHeight: 0,//导航栏高度\r\n\t\t\tifShowComment: false, //判断是否展示评论区域\r\n\t\t\tfinishVote: false, //判断是否展示投票结果条形图\r\n\t\t\tpersentBarWidth: 0,//条形图宽度\r\n\t\t};\r\n\t},\r\n\r\n\tonLoad: function() {\r\n\t\t//获取导航栏高度\r\n\t\tvar height = this.getnavbarHeight().bottom + 5;\r\n\t\tthis.navigationBarHeight = height;\r\n\t\tconsole.log('导航栏高度=' + this.navigationBarHeight);\r\n\t\t//计算投票卡片高度\r\n\t\tthis.calculateHeight();\r\n\t},\r\n\r\n\tonShow() {\r\n\t\tthis.setTabBarIndex(1); //index为当前tab的索引\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tcalculateHeight(){\r\n\t\t\tvar that = this;\r\n\t\t\tvar pageHeight;\r\n\t\t\t\tuni.getSystemInfo({\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tpageHeight = res.windowHeight;\r\n\t\t\t\t\t\tthat.voteCardHeight = pageHeight - (99 + that.navigationBarHeight);\r\n\t\t\t\t\t\t// console.log(that.voteCardHeight);\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t\t// console.log(this.voteCardHeight);\r\n\t\t\t},\r\n\r\n\t\t\tswitchChoose(selectedOptionId, voteIndex) {\r\n\t\t\t\t\r\n\t\t\t\t// console.log(\"传进来的选项id= \"+ selectedOptionId);\r\n\t\t\t\tvar that = this;\r\n\t\t\t\t\r\n\t\t\t\t// 如果记录的index和传进来的voteIndex相同, 则继续操作\r\n\t\t\t\t// 如果记录的index和传进来的voteIndex不同, 则将所有inchosen变为false再进行操作\r\n\t\t\t\tif(that.ischosenFlag == voteIndex){\r\n\t\t\t\t\tif (selectedOptionId == that.selectedOptionId){\r\n\t\t\t\t\t\tthat.selectedOptionId = '';\r\n\t\t\t\t\t\tthat.ischosen[voteIndex] = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.ischosen[voteIndex] = true;\r\n\t\t\t\t\t\tthat.selectedOptionId = selectedOptionId;\r\n\t\t\t\t\t\tthat.currentVoteIndex = voteIndex;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 不相等时\r\n\t\t\t\t\tfor(var i = 0; i < that.ischosen.length; i++){\r\n\t\t\t\t\t\tthat.ischosen[i] = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// console.log(\"改变页面后\"+that.ischosen);\r\n\t\t\t\t\tif (selectedOptionId == that.selectedOptionId){\r\n\t\t\t\t\t\tthat.selectedOptionId = '';\r\n\t\t\t\t\t\tthat.ischosen[voteIndex] = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.ischosen[voteIndex] = true;\r\n\t\t\t\t\t\tthat.selectedOptionId = selectedOptionId;\r\n\t\t\t\t\t\tthat.currentVoteIndex = voteIndex;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// 记录是在第几个vote进行操作\r\n\t\t\t\tthat.ischosenFlag = voteIndex;\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(\"赋值后的选项id= \"+ that.selectedOptionId);\r\n\t\t\t\t// console.log(that.currentVoteIndex);\r\n\t\t\t\t// console.log(that.ischosen);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * @param {Object} voteId 投票的id\r\n\t\t\t * @param {Object} voteIndex 投票的index, 用来控制下面的确认投票键\r\n\t\t\t */\r\n\t\t\tconfirmVote(voteId, voteIndex) {\r\n\t\t\t\tthis.ifShowComment = !this.ifShowComment;\r\n\t\t\t\tthis.finishVote[voteIndex] = !this.finishVote[voteIndex];\r\n\t\t\t\t// console.log('确认投票');\r\n\t\t\t\tthis.onePersentBarGrow();\r\n\t\t\t\tthis.voteCardHeight = 3000; //确认投票后or该投票状态为已投，改变卡片高度\r\n\t\t\t\t\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: that.$serverUrl + '/vote/selectOption',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\toptionId: that.selectedOptionId,\r\n\t\t\t\t\t\tuserId: that.userInfo.id,\r\n\t\t\t\t\t\tvoteId: voteId\r\n\t\t\t\t\t},\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'content-type': 'application/json'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t// console.log('123');\r\n\t\t\t\t\t\t// console.log(that.selectedOptionId);\r\n\t\t\t\t\t\t// console.log(voteId);\r\n\t\t\t\t\t\t// console.log(res);\r\n\t\t\t\t\t\t// 得到投票后的数值, 根据新的OptionList的id和that.selectedOptionId来判断放在哪一个区域\r\n\t\t\t\t\t\t// 如果两个相等, 放在用户选择区, 其余放在非用户选择区\r\n\t\t\t\t\t\tthat.afterSelectedResult = res.data.data.rows[0];\r\n\t\t\t\t\t\tthat.showList[that.currentVoteIndex] = that.afterSelectedResult;\r\n\t\t\t\t\t\tconsole.log(that.afterSelectedResult);\r\n\t\t\t\t\t\tthat.afterSelectedOptionList = that.afterSelectedResult.optionList;\r\n\t\t\t\t\t\tconsole.log(that.afterSelectedOptionList);\r\n\t\t\t\t\t\t// that.ischosen[voteIndex] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tonePersentBarGrow: function() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\t//var width = this.persentBarWidth;//赋值宽度\r\n\t\t\t\tclearInterval(timer); //清空 timer\r\n\t\t\t\ttimer = setInterval(function() {\r\n\t\t\t\t\t//设置计时器\r\n\t\t\t\t\tif (that.persentBarWidth == 100) {\r\n\t\t\t\t\t\t//在 persentBarWidth 为目标值时清空计时器，暂以100代替\r\n\t\t\t\t\t\tclearInterval(timer);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.persentBarWidth = that.persentBarWidth + 1;\r\n\t\t\t\t\t\tconsole.log(\"进度条拉长\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 12);\r\n\t\t\t},\r\n\r\n\t\t\tshowVotes: function(page) {\r\n\t\t\t\tif (loadVoteFlag) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tloadVoteFlag = true;\r\n\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中...'\r\n\t\t\t\t});\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tif (loadVoteFlag) {\r\n\t\t\t\t\t\tloadVoteFlag = false; //解锁\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '网络未知错误',\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\tduration: 1000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 5000) // 延时5s timeout\r\n\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tconsole.log(1);\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: that.$serverUrl + '/vote/queryAllVotes',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tpage: page,\r\n\t\t\t\t\t\tuserId: that.userInfo.id\r\n\t\t\t\t\t},\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t// 延时加载\r\n\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\tloadVoteFlag = false;\r\n\t\t\t\t\t\t\t// console.log(res);\r\n\t\t\t\t\t\t\t// 判断当前页是不是第一页，如果是第一页，那么设置showList为空\r\n\t\t\t\t\t\t\tif (page == 1) {\r\n\t\t\t\t\t\t\t\tthat.showList = [];\r\n\t\t\t\t\t\t\t\tvar newVoteList = res.data.data.rows;\r\n\t\t\t\t\t\t\t\tvar oldVoteList = that.showList;\r\n\t\t\t\t\t\t\t\tthat.showList = oldVoteList.concat(newVoteList);\r\n\t\t\t\t\t\t\t\tthat.currentPage = page;\r\n\t\t\t\t\t\t\t\tthat.totalPage = res.data.data.total;\r\n\t\t\t\t\t\t\t\tconsole.log(res.data.data.rows.length);\r\n\t\t\t\t\t\t\t\tfor(var i = 0; i < res.data.data.rows.length; i++){\r\n\t\t\t\t\t\t\t\t\tthat.ischosen[i] = false;\r\n\t\t\t\t\t\t\t\t\tthat.finishVote[i] = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tconsole.log(that.ischosen);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 300);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tloadVoteFlag = false;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconsole.log('index unirequest fail');\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t}\r\n\t};\r\n","import mod from \"-!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./votePage.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Downloads/HBuilderX.1.9.9.20190522.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./votePage.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}