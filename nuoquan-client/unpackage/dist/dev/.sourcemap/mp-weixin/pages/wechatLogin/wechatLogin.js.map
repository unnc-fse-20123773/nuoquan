{"version":3,"sources":["webpack:///F:/codingWorkspace/nuoquan/nuoquan-client/main.js","webpack:///F:/codingWorkspace/nuoquan/nuoquan-client/pages/wechatLogin/wechatLogin.vue?fb10","webpack:///F:/codingWorkspace/nuoquan/nuoquan-client/pages/wechatLogin/wechatLogin.vue?5314","webpack:///F:/codingWorkspace/nuoquan/nuoquan-client/pages/wechatLogin/wechatLogin.vue?e74f","webpack:///F:/codingWorkspace/nuoquan/nuoquan-client/pages/wechatLogin/wechatLogin.vue?f3d6","webpack:///F:/codingWorkspace/nuoquan/nuoquan-client/pages/wechatLogin/wechatLogin.vue"],"names":["createPage","Page","data","userId","onLoad","methods","getUserInfo","that","uni","login","success","res_login","info","request","url","$serverUrl","method","encryptedData","iv","code","nickname","userInfo","nickName","faceImg","avatarUrl","header","res","status","finalUser","myUser","setGlobalUserInfo","console","log","navigateBack","delta","setUser","wUserInfo","weUser","id","JSON","stringify","removeUserInfo","removeGlobalUserInfo","clearStorage","testLogIn"],"mappings":";;;;;;;;;;kDAAA,wCAAmB;;AAEnB;AACA,+G;AACAA,UAAU,CAACC,oBAAD,CAAV,C;;;;;;;;;;;;;ACJA;AAAA;AAAA;AAAA;AAAA;AAA0F;AAC3B;AACL;;;AAG1D;AAC4H;AAC5H,gBAAgB,0IAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,sFAAM;AACR,EAAE,+FAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACtCf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAusB,CAAgB,wtBAAG,EAAC,C;;;;;;;;;;;;mICA3tB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;AAWe;AACdC,MADc,kBACP;AACN,WAAO;AACNC,YAAM,EAAE,EADF,EAAP;;AAGA,GALa;;AAOdC,QAPc,oBAOL;;AAER,GATa;AAUdC,SAAO,EAAE;AACR;;;AAGAC,eAJQ,yBAIM;AACb,UAAIC,IAAI,GAAG,IAAX;AACAC,SAAG,CAACC,KAAJ,CAAU;AACTC,eAAO,EAAE,iBAAAC,SAAS,EAAI;AACrB;AACA;AACAH,aAAG,CAACF,WAAJ,CAAgB;AACfI,mBAAO,EAAE,iBAAAE,IAAI,EAAI;AAChB;AACA;AACA;AACAJ,iBAAG,CAACK,OAAJ,CAAY;AACXC,mBAAG,EAAEP,IAAI,CAACQ,UAAL,GAAkB,qBADZ;AAEXC,sBAAM,EAAE,MAFG;AAGXd,oBAAI,EAAE;AACLe,+BAAa,EAAEL,IAAI,CAACK,aADf;AAELC,oBAAE,EAAEN,IAAI,CAACM,EAFJ;AAGLC,sBAAI,EAAER,SAAS,CAACQ,IAHX;;AAKLC,0BAAQ,EAAER,IAAI,CAACS,QAAL,CAAcC,QALnB;AAMLC,yBAAO,EAAEX,IAAI,CAACS,QAAL,CAAcG,SANlB,EAHK;;AAWXC,sBAAM,EAAE;AACP,kCAAgB,mCADT,EAXG;;AAcXf,uBAAO,EAAE,iBAACgB,GAAD,EAAS;AACjB;AACA,sBAAIA,GAAG,CAACxB,IAAJ,CAASyB,MAAT,IAAmB,GAAvB,EAA4B;AAC3B;AACA,wBAAIC,SAAS,GAAGF,GAAG,CAACxB,IAAJ,CAASA,IAAzB;AACA;AACA0B,6BAAS,GAAG,KAAI,CAACC,MAAL,CAAYD,SAAZ,CAAZ;AACA;AACA,yBAAI,CAACE,iBAAL,CAAuBF,SAAvB;AACAG,2BAAO,CAACC,GAAR,CAAYJ,SAAZ;;AAEA;AACApB,uBAAG,CAACyB,YAAJ,CAAiB;AAChBC,2BAAK,EAAE,CADS,EAAjB;;AAGA;AACD,iBA9BU,EAAZ;;AAgCA,aArCc,EAAhB;;AAuCA,SA3CQ,EAAV;;AA6CA,KAnDO;;AAqDRC,WArDQ,mBAqDAC,SArDA,EAqDW;AAClB;AACA;AACA,UAAIC,MAAM,GAAG;AACZ;AACAC,UAAE,EAAE,YAFQ;AAGZlB,gBAAQ,EAAEgB,SAAS,CAACd,QAHR;AAIZC,eAAO,EAAEa,SAAS,CAACZ,SAJP,EAAb;;AAMAO,aAAO,CAACC,GAAR,CAAYI,SAAZ;AACA,UAAIR,SAAJ;AACA;AACA,UAAIrB,IAAI,GAAG,IAAX;AACAC,SAAG,CAACK,OAAJ,CAAY;AACXC,WAAG,EAAEP,IAAI,CAACQ,UAAL,GAAkB,kBADZ;AAEXC,cAAM,EAAE,MAFG;AAGXd,YAAI,EAAEqC,IAAI,CAACC,SAAL,CAAeH,MAAf,CAHK;AAIXZ,cAAM,EAAE;AACP,0BAAgB,kBADT,EAJG;;AAOXf,eAAO,EAAE,iBAACgB,GAAD,EAAS;AACjBK,iBAAO,CAACC,GAAR,CAAYN,GAAZ;AACA,cAAIA,GAAG,CAACxB,IAAJ,CAASyB,MAAT,IAAmB,GAAvB,EAA4B;AAC3B;AACAC,qBAAS,GAAGF,GAAG,CAACxB,IAAJ,CAASA,IAArB;AACA;AACA0B,qBAAS,GAAG,MAAI,CAACC,MAAL,CAAYD,SAAZ,CAAZ;AACA;AACA,kBAAI,CAACE,iBAAL,CAAuBF,SAAvB;AACAG,mBAAO,CAACC,GAAR,CAAYJ,SAAZ;;AAEA;AACApB,eAAG,CAACyB,YAAJ,CAAiB;AAChBC,mBAAK,EAAE,CADS,EAAjB;;AAGA;AACD,SAvBU,EAAZ;;AAyBA,KA3FO;;AA6FRO,kBA7FQ,4BA6FS;AAChB,WAAKC,oBAAL;AACAX,aAAO,CAACC,GAAR,CAAY,WAAZ;AACA,KAhGO;;AAkGRW,gBAlGQ,0BAkGO;AACdnC,SAAG,CAACmC,YAAJ;AACAZ,aAAO,CAACC,GAAR,CAAY,SAAZ;AACA,KArGO;;AAuGRY,aAvGQ,uBAuGI;AACXb,aAAO,CAACC,GAAR,CAAY,KAAK7B,MAAjB;AACA,UAAII,IAAI,GAAG,IAAX;AACAC,SAAG,CAACK,OAAJ,CAAY;AACXC,WAAG,EAAEP,IAAI,CAACQ,UAAL,GAAkB,iBADZ;AAEXC,cAAM,EAAE,MAFG;AAGXd,YAAI,EAAE;AACLC,gBAAM,EAAEI,IAAI,CAACJ,MADR,EAHK;;AAMXsB,cAAM,EAAE;AACP,0BAAgB,mCADT,EANG;;AASXf,eAAO,EAAE,iBAACgB,GAAD,EAAS;AACjBK,iBAAO,CAACC,GAAR,CAAYN,GAAZ;AACA,cAAIA,GAAG,CAACxB,IAAJ,CAASyB,MAAT,IAAmB,GAAvB,EAA4B;AAC3B,gBAAIC,SAAS,GAAGF,GAAG,CAACxB,IAAJ,CAASA,IAAzB;AACA,kBAAI,CAAC4B,iBAAL,CAAuBF,SAAvB;AACA;AACApB,eAAG,CAACyB,YAAJ,CAAiB;AAChBC,mBAAK,EAAE,CADS,EAAjB;;AAGA;AACD,SAnBU,EAAZ;;AAqBA,KA/HO,EAVK,E","file":"pages/wechatLogin/wechatLogin.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/wechatLogin/wechatLogin.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./wechatLogin.vue?vue&type=template&id=02159933&\"\nimport script from \"./wechatLogin.vue?vue&type=script&lang=js&\"\nexport * from \"./wechatLogin.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('02159933', component.options)\n    } else {\n      api.reload('02159933', component.options)\n    }\n    module.hot.accept(\"./wechatLogin.vue?vue&type=template&id=02159933&\", function () {\n      api.rerender('02159933', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"F:/codingWorkspace/nuoquan/nuoquan-client/pages/wechatLogin/wechatLogin.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-hbuilderx\\\\packages\\\\webpack-uni-nvue-loader\\\\lib\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wechatLogin.vue?vue&type=template&id=02159933&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wechatLogin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wechatLogin.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* User Example\n userInfo: {\n \tid: 'test-id123',\n \tnickname: 'test-name',\n \tfaceImg: '../static/touxiang.jpg',\n \tfaceImgThumb: '../static/touxiang.jpg',\n \temail: 'zy22089@nottingham.edu.cn',\n \temailPrefix: 'zy22089',\n \temailSuffix: '@nottingham.edu.cn'\n}*/\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tuserId: ''\n\t\t}\n\t},\n\n\tonLoad() {\n\n\t},\n\tmethods: {\n\t\t/**\n\t\t * 微信小程序登陆\n\t\t */\n\t\tgetUserInfo() {\n\t\t\tvar that = this;\n\t\t\tuni.login({\n\t\t\t\tsuccess: res_login => {\n\t\t\t\t\t// console.log('-------res_login，获取code-------')\n\t\t\t\t\t// console.log(res_login);\n\t\t\t\t\tuni.getUserInfo({\n\t\t\t\t\t\tsuccess: info => {\n\t\t\t\t\t\t\t// console.log('-------获取sessionKey、openid(unionid)-------')\n\t\t\t\t\t\t\t// console.log(info);\n\t\t\t\t\t\t\t// 后端获取openid 并设置用户信息\n\t\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\t\turl: that.$serverUrl + '/user/getWxUserInfo',\n\t\t\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tencryptedData: info.encryptedData,\n\t\t\t\t\t\t\t\t\tiv: info.iv,\n\t\t\t\t\t\t\t\t\tcode: res_login.code,\n\n\t\t\t\t\t\t\t\t\tnickname: info.userInfo.nickName,\n\t\t\t\t\t\t\t\t\tfaceImg: info.userInfo.avatarUrl\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\theader: {\n\t\t\t\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t// console.log(res)\n\t\t\t\t\t\t\t\t\tif (res.data.status == 200) {\n\t\t\t\t\t\t\t\t\t\t// 3.获取返回的用户信息\n\t\t\t\t\t\t\t\t\t\tvar finalUser = res.data.data;\n\t\t\t\t\t\t\t\t\t\t// 4.分割邮箱地址, 重构 user\n\t\t\t\t\t\t\t\t\t\tfinalUser = this.myUser(finalUser);\n\t\t\t\t\t\t\t\t\t\t// 5.写入缓存\n\t\t\t\t\t\t\t\t\t\tthis.setGlobalUserInfo(finalUser);\n\t\t\t\t\t\t\t\t\t\tconsole.log(finalUser);\n\n\t\t\t\t\t\t\t\t\t\t// 6.返回\n\t\t\t\t\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\t\t\t\t\tdelta: 1\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tsetUser(wUserInfo) {\n\t\t\t/* Deprecated ! 现用 /user/getWxUserInfo 直接处理代替 */\n\t\t\t// 1.微信用户信息 用于上传\n\t\t\tvar weUser = {\n\t\t\t\t// id: wUserInfo.openid\n\t\t\t\tid: 'test-id123',\n\t\t\t\tnickname: wUserInfo.nickName,\n\t\t\t\tfaceImg: wUserInfo.avatarUrl\n\t\t\t}\n\t\t\tconsole.log(wUserInfo)\n\t\t\tvar finalUser;\n\t\t\t// 2.把微信信息上传给服务器\n\t\t\tvar that = this;\n\t\t\tuni.request({\n\t\t\t\turl: that.$serverUrl + '/user/updateUser',\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: JSON.stringify(weUser),\n\t\t\t\theader: {\n\t\t\t\t\t'content-type': 'application/json'\n\t\t\t\t},\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log(res)\n\t\t\t\t\tif (res.data.status == 200) {\n\t\t\t\t\t\t// 3.获取返回的用户信息\n\t\t\t\t\t\tfinalUser = res.data.data;\n\t\t\t\t\t\t// 4.分割邮箱地址, 重构 user\n\t\t\t\t\t\tfinalUser = this.myUser(finalUser);\n\t\t\t\t\t\t// 5.写入缓存\n\t\t\t\t\t\tthis.setGlobalUserInfo(finalUser);\n\t\t\t\t\t\tconsole.log(finalUser);\n\n\t\t\t\t\t\t// 6.返回\n\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\tdelta: 1\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tremoveUserInfo() {\n\t\t\tthis.removeGlobalUserInfo();\n\t\t\tconsole.log(\"用户信息缓存已清除\")\n\t\t},\n\n\t\tclearStorage() {\n\t\t\tuni.clearStorage();\n\t\t\tconsole.log(\"所有缓存已清除\")\n\t\t},\n\n\t\ttestLogIn() {\n\t\t\tconsole.log(this.userId)\n\t\t\tvar that = this;\n\t\t\tuni.request({\n\t\t\t\turl: that.$serverUrl + '/user/queryUser',\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: {\n\t\t\t\t\tuserId: that.userId\n\t\t\t\t},\n\t\t\t\theader: {\n\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded'\n\t\t\t\t},\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log(res)\n\t\t\t\t\tif (res.data.status == 200) {\n\t\t\t\t\t\tvar finalUser = res.data.data;\n\t\t\t\t\t\tthis.setGlobalUserInfo(finalUser);\n\t\t\t\t\t\t// 6.返回\n\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\tdelta: 1\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n"],"sourceRoot":""}